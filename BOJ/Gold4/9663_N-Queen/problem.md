# 9663. N-Queen

## 문제 링크

https://www.acmicpc.net/problem/9663

## 문제 분류

: 브루트포스 알고리즘, 백트래킹

## 소요 시간

: 1시간

## 풀이 방법

N개의 퀸을 보드에 서로 공격할 수 없게 배치하는 방법의 수를 찾는 문제이다.

퀸은 가로, 세로, 대각선을 모두 공격이 가능하다. N이 1일 때는 1개, N이 2, 3일 때는 배치가 불가능하다. 중요한 것은 N이 4일 때부터다.

N이 4일 때를 보면 퀸은 가로(행)에도 하나, 세로(열)로도 하나 밖에 배치할 수 없다. 행과 열에 따라 한 칸에 하나씩 배치가 가능하다. 즉, 2차원 배열이 아닌 1차원 배열로 풀이할 수 있을 것이다. 예를 들어 N이 4라면, [3, 1, 4, 2], [2, 4, 1, 3] 두가지 경우가 있다.

- **퀸은 한 줄에 하나씩 존재하므로 1차원 배열을 통해 문제를 풀이할 수 있다.**

1차원 배열에 퀸을 하나씩 배치한다고 해보자. 1차원 배열이므로 **각 인덱스가 2차원 배열의 행을 나타낸다고 생각하고, 인덱스의 값에는 열 번호를 넣어주면서 퀸의 위치를 표시**할 수 있다.

한 행씩 퀸을 배치하므로 같은 행에 존재하는지 여부는 판단할 필요가 없다. 그렇다면 우리가 판단해야 할 것은 퀸이 같은 열에 있는지, 혹은 대각선 상에 위치해있는지를 판단해야 한다.

**같은 열에 있는지는 현재 행 전까지의 값들을 비교하면서 현재 행의 값과 같은지를 비교**하면 된다. 각 값에는 열 번호를 넣었기 때문이다.

그렇다면 대각선은 어떻게 판단해야할까? 예를 들어 퀸이 (1, 0)에 위치해 있다고 생각해보자. 해당 퀸의 대각선 상에는 (0, 1), (2, 1), (3, 2), (4, 3)이 있다. 퀸이 (0, 1)에 위치해있다고 생각하면 대각선 상에는 (1, 0), (1, 2), (2, 3), (3, 4)가 있다.

위 좌표들을 잘 살펴보면 하나의 규칙을 발견할 수 있다. 각 쌍의 행과 열의 차의 절댓값이 1로써 동일하다. 따라서 대각선의 위치는 두 퀸의 행과 열의 차가 동일한 경우란 것을 알 수 있다.

즉, 다음의 식을 통해 두 퀸이 대각선 상에 위치한지 알 수 있다.

```js
| 두 퀸의 행 번호 차이 | === | 두 퀸의 열 번호 차이 |
```

예를 들어, (1, 0)과 (2, 1)에 퀸이 위치해있다면 `|1 - 2| === |0 - 1|`로써 동일하므로 두 퀸은 대각선 상에 위치해있다는 것을 알 수 있다.

- **대각선은 두 퀸의 행과 열의 차가 동일한 경우로 판단할 수 있다.**

## 풀이 코드

```js
const solution = (N) => {
  // 퀸을 배치할 보드
  const board = new Array(N).fill(0);

  let answer = 0;

  const dfs = (row) => {
    // N행까지 배치를 마쳤다면 퀸을 모두 배치했으므로 경우의 수 증가
    if (row === N) {
      answer++;
      return;
    }

    // 1열부터 N열까지
    for (let column = 0; column < N; column++) {
      // 이미 해당 행에 배치를 했다면 건너뛰기
      if (board[row]) continue;

      // 현재 행에 열값 넣어주기 -> 즉, board[row][column]에 배치한 것과 같다.
      board[row] = column;

      // 현재 행에 배치할 수 있다면 다음 행에 배치할 곳 찾기
      if (isValid(board, row)) dfs(row + 1);

      // 다른 배치를 위해 다시 0으로 만들기
      board[row] = 0;
    }
  };

  dfs(0);

  return answer;
};

const isValid = (board, row) => {
  // 현재 퀸을 배치할 행의 이전까지만 비교
  for (let i = 0; i < row; i++) {
    // 이전 행에 같은 열에 이미 퀸을 배치했다면
    if (board[row] === board[i]) return false;
    // Math.abs(board[row] - board[i])는 두 퀸의 열 번호를 비교
    // row - i는 두 퀸의 행 번호를 비교
    // 둘의 차가 같다면 대각선에 위치한 것
    if (Math.abs(board[row] - board[i]) === row - i) return false;
  }

  return true;
};
```
